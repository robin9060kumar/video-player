<!DOCTYPE html>
<html>
<head>
  <title>Video.js with Ads</title>
  <link href="https://vjs.zencdn.net/7.21.0/video-js.css" rel="stylesheet">
</head>
<body>

<video id="my-player" class="video-js" controls preload="auto" width="640" height="360">
  <source src="https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4" />
</video>

<script src="https://vjs.zencdn.net/7.21.0/video.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-ads/6.9.0/videojs.ads.min.js"></script>
<script src="https://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-ima@1.10.1/dist/videojs.ima.min.js"></script>

<script>
  const player = videojs('my-player');

  const adTagUrl = "https://pubads.g.doubleclick.net/gampad/ads?" +
    "iu=/21775744923/external/single_ad_samples&" +
    "description_url=https%3A%2F%2Fexample.com&" +
    "env=vp&output=vast&unviewed_position_start=1&" +
    "impl=s&gdfp_req=1&cmsid=496&vid=short_onecue&correlator=" + Date.now();

  player.ima({
    adTagUrl: adTagUrl,
    debug: true
  });

  player.ready(() => {
    player.ima.initializeAdDisplayContainer();
    player.muted(true);   // Ensures autoplay works
    player.play();        // Plays and triggers preroll
  });
</script>

</body>
</html>
