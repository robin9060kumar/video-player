<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Video.js with Ads</title>
  <link rel="icon" href="data:,">
  <link href="https://vjs.zencdn.net/7.21.0/video-js.css" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      height: 200vh;
    }
    #video-wrapper {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 640px;
      height: 360px;
      z-index: 999;
      transition: all 0.4s ease;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    .sticky {
      position: fixed !important;
      top: auto !important;
      left: auto !important;
      right: 20px !important;
      bottom: 20px !important;
      width: 320px !important;
      height: 180px !important;
      transform: none !important;
    }
  </style>
</head>
<body>

<div id="video-wrapper">
  <video
    id="my-player"
    class="video-js vjs-default-skin"
    controls
    preload="auto"
    muted
    autoplay
    playsinline
    width="100%"
    height="100%"
    data-setup='{}'>
    <source src="https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4" />
  </video>
</div>

<script src="https://vjs.zencdn.net/7.21.0/video.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-ads/6.9.0/videojs.ads.min.js"></script>
<script src="https://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-ima@1.10.1/dist/videojs.ima.min.js"></script>

<script>
  const player = videojs('my-player');

  const adTagUrl = "https://pubads.g.doubleclick.net/gampad/ads?" +
    "iu=/21775744923/external/single_ad_samples&" +
    "description_url=https%3A%2F%2Fdevelopers.google.com&" +
    "env=vp&output=vast&unviewed_position_start=1&" +
    "sz=640x480&cust_params=sample_ct%3Dlinear&" +
    "correlator=" + Date.now();

  player.ima({
    adTagUrl: adTagUrl,
    debug: true
  });

  player.ready(() => {
    player.ima.initializeAdDisplayContainer();
    // Don't call player.play() here unless you're handling autoplay behavior
  });

  const wrapper = document.getElementById('video-wrapper');
  window.addEventListener('scroll', () => {
    if (window.scrollY > 100) {
      wrapper.classList.add('sticky');
    } else {
      wrapper.classList.remove('sticky');
    }
  });
</script>

</body>
</html>
